{% extends 'base.html' %} 
{% load static%} 
{% load home_tags %}
{% block title %} Amazon {%endblock%}

{% block stylesheets %}
<link rel="stylesheet" href="{% static 'styles/pages/home.css'%}" />
<link rel="stylesheet" href="{% static 'styles/pages/search.css'%}" />
<link rel="stylesheet" href="{% static 'styles/shared/header.css'%}" />
{% endblock %}

{% block body %}
<header>
  <div class="main-header">
    <div class="header-left-section">
      <img
        class="hamburger-menu hamburger-bars"
        src="{% static 'images/icons/hamburger-menu.svg'%}"
      />
      <img
      class="hamburger-menu hamburger-dotted"
      src="{% static 'images/icons/hamburger-dotted.png'%}"
      />
     
      <a href="{% url 'home:index' %}" class="header-link-logo">
        <img
          class="logo"
          src="{% static 'images/logo/logo.png' %}"
        />
        <div class="home-message">Home</div>
      </a>
    </div>
  
   <div class="menu-container">
      <img class="logo" src="{% static 'images/logo/logo.png' %}" alt="logo">
      <img class="menu-cancel" src="{% static 'images/icons/cross-black.png' %}">

      <a href="/" class="menu"> <img src="{% static 'images/icons/home.png' %}" alt="home"> Home </a>
      <a href="{% url 'account:index' %}" class="menu"> <img src="{% static 'images/icons/user-account.png' %}" alt="account-icon"> Account</a>
      <a href="{% url 'reviews:index' %}" class="menu"> <img src="{% static 'images/icons/categories.png' %}" alt="categories"> Categories</a>
      <a href="#" class="menu"> <img src="{% static 'images/icons/call.png' %}" alt="call"> Contact Seller</a>
      <a href="{% url 'home:brands' %}" class="menu"> <img src="{% static 'images/icons/brand.png' %}" alt="brands"> Featured Brands</a>
      <a href="{% url 'reviews:index' %}" class="menu"> <img src="{% static 'images/icons/positive-review.png' %}" alt="reviews"> Reviews </a>
      <a href="{% url 'likes:index' %}" class="menu"> <img src="{% static 'images/icons/heart-fill.png' %}" alt="likes"> My Likes</a>
      <a href="/account/#recent-header" class="menu"> <img src="{% static 'images/icons/history.png' %}" alt="history"> History </a>
      <a href="#" class="menu"> <img src="{% static 'images/icons/help and feedback.png' %}" alt="help/feedback"> Help & Feedback </a>
    </div>
  
    <div class="header-middle-section">
      <a href="" class="orders-link">
        Orders
      </a>
     
      <a class="notifications-link" href="{% url 'account:notifications' %}">
        <img class="notifications-icon" src="{% static 'images/icons/notifications.svg' %}" alt="notifications">
        <div class="notifications-count">2</div>
        <div class="notifications-message">Notifications</div>
      </a>
      {% if request.user.is_authenticated %}
      <a class="account-link" href="{% url 'account:index' %}">
        <img class="account-icon" src="{% static 'images/icons/user-account.png' %}" alt="account-icon">
        <div class="account-message">Account</div>
      </a>
      {% else %}
      <p>
        <a href="{% url 'account:login' %}" class="signup-link">Log In</a> or <a href="{% url 'account:signup' %}" class="signup-link">Sign Up</a>
      </p>      
      {% endif %}
    </div>

    <div class="header-right-section">
      <button class="header-search-button button-primary">
        <img
          class="header-search-icon"
          src="{% static 'images/icons/search-icon.png' %}"
        />
        <div class="search-message">Search</div>
      </button>
  
      <div class="search-container">
        <div class="search">
          <input
            type="search"
            placeholder="Search Amazon"
            id="search-input"
          />
          <button class="search-button">
            <img
              class="search-icon"
              src="{% static 'images/icons/search-icon.png' %}"
            />
            <div class="search-button-hover">Search</div>
          </button>
        </div>
  
        <img
            src="{% static 'images/icons/cross-black.png' %}"
            alt="cancel-icon"
            class="search-cancel-button"
        />
  
        <div class="matching-items-container">
        </div>
      </div>
  
      <a class="cart-link button-primary" href="{% url 'cart:index' %}">
        <div class="cart-quantity">{{cart_quantity}}</div>
        <img class="cart-icon" src="{% static 'images/icons/shopping-cart.png' %}" />
        <div class="cart-message">Cart</div>
      </a>
    </div>
  </div>
  
  <div class="sub-header">
    <a href="" class="orders-link">
      Orders
    </a>
   
    <a class="notifications-link" href="{% url 'account:notifications' %}">
      <img class="notifications-icon" src="{% static 'images/icons/notifications.svg' %}" alt="notifications">
      <div class="notifications-count">2</div>
      <div class="notifications-message">Notifications</div>
    </a>
    {% if request.user.is_authenticated %}
    <a class="account-link" href="{% url 'account:index' %}">
      <img class="account-icon" src="{% static 'images/icons/user-account.png' %}" alt="account-icon">
      <div class="account-message">Account</div>
    </a>
    {% else %}
    <p>
      <a href="{% url 'account:login' %}" class="signup-link">Log In</a> or <a href="{% url 'account:signup' %}" class="signup-link">Sign Up</a>
    </p>
    {% endif %}
  </div>
</header>

<main>
  <nav>
    <ul class="side-bar">
      <li><a href="/">
        <img class="logo" src="{% static 'images/icons/home.png' %}"> Home
      </a></li>
      <li><a href="{% url 'account:index' %}">
        <img class="logo" src="{% static 'images/icons/user-account.png' %}"> Account
      </a></li>
      <li><a href="">
        <img class="logo" src="{% static 'images/icons/categories.png' %}"> Categories
      </a></li>
      <li><a href="">
        <img class="logo" src="{% static 'images/icons/call.png' %}"> Contact Seller
      </a></li>
      <li><a href="{% url 'home:brands' %}">
        <img class="logo" src="{% static 'images/icons/brand.png' %}"> Featured Brands
      </a></li>
      <li><a href="{% url 'reviews:index' %}">
        <img class="logo" src="{% static 'images/icons/positive-review.png' %}"> Reviews
      </a></li>
      <li><a href="{% url 'likes:index' %}">
        <img class="logo" src="{% static 'images/icons/heart-fill.png' %}"> Likes
      </a></li>
      <li><a href="/account/#recent-header">
        <img class="logo" src="{% static 'images/icons/history.png' %}"> History
      </a></li>
      <li><a href="">
        <img class="logo" src="{% static 'images/icons/help and feedback.png' %}"> Help & Feedback
      </a></li>
    </ul>
</nav>


<section>
  <div class="adverts-container">
    <!-- <swiper-container class="swiper" pagination="true" pagination-clickable="true" navigation="true" space-between="30"
    centered-slides="true" autoplay-delay="2500" autoplay-disable-on-interaction="false">
      <swiper-slide class="swiper-slide">Slide 1</swiper-slide>
      <swiper-slide class="swiper-slide">Slide 2</swiper-slide>
      <swiper-slide class="swiper-slide">Slide 3</swiper-slide>
      <swiper-slide class="swiper-slide">Slide 4</swiper-slide>
      <swiper-slide class="swiper-slide">Slide 5</swiper-slide>
      <swiper-slide class="swiper-slide">Slide 6</swiper-slide>
      <swiper-slide class="swiper-slide">Slide 7</swiper-slide>
      <swiper-slide class="swiper-slide">Slide 8</swiper-slide>
      <swiper-slide class="swiper-slide">Slide 9</swiper-slide>
  </swiper-container> -->

  <swiper-container id="swiper" pagination="true" pagination-clickable="true" navigation="true" space-between="0"
    centered-slides="true" autoplay-delay="2500" autoplay-disable-on-interaction="false">
      <swiper-slide id="adverts-swiper-slide">Slide 1</swiper-slide>
      <swiper-slide id="adverts-swiper-slide">Slide 2</swiper-slide>
      <swiper-slide id="adverts-swiper-slide">Slide 3</swiper-slide>
      <swiper-slide id="adverts-swiper-slide">Slide 4</swiper-slide>
      <swiper-slide id="adverts-swiper-slide">Slide 5</swiper-slide>
      <swiper-slide id="adverts-swiper-slide">Slide 6</swiper-slide>
      <swiper-slide id="adverts-swiper-slide">Slide 7</swiper-slide>
      <swiper-slide id="adverts-swiper-slide">Slide 8</swiper-slide>
      <swiper-slide id="adverts-swiper-slide">Slide 9</swiper-slide>
  </swiper-container>
  </div>
</section>


  <section>
    <div class="swiper-header">
      New Arrivals
      <a class="see-all-link" href="/new-arrivals">SEE ALL <img src="{% static 'images/icons/right-angle.png' %}" alt="right-angle-icon"> </a>
    </div>
    <div class="swiper-container">
      <swiper-container class="mySwiper" space-between="0"
      slides-per-view="2.5">
      {% for product in new_arrivals %}
      <swiper-slide>
        <div class="swiper-image"><img src="../media/{{product.cover_image}}"></div>
          {% if product.discounted_price %}
          <div class="price">Ksh {{product.discounted_price|prices_filter}}</div>
          {% else %}
          <div class="price">Ksh {{product.price|prices_filter}}</div>
          {% endif %}
      </swiper-slide>
      {% endfor %}
    </swiper-container>
    </div>
  </section>

  <section>
    {% if discounts_above_10 %}
      <div class="swiper-header">
        Deals Upto 10% OFF<a class="see-all-link" href="/top-discounts">SEE ALL <img src="{% static 'images/icons/right-angle.png' %}" alt="right-angle-icon"> </a>
      </div>
      <div class="swiper-container    r">
        <swiper-container class="mySwiper" space-between="0"
        slides-per-view="2.5">
        {% for item in discounts_above_10 %}
          <swiper-slide>
            <div class="swiper-image" style="height: 80%;"><img src="../media/{{item.product.cover_image}}">
              <div class="swiper-percentage">-{{item.percentage_discount}}%</div>
            </div>
              <div class="price" style="font-size: .85rem;">Ksh {{item.product.discounted_price|prices_filter}}</div>
              <strike style="font-size: .85rem;">Ksh {{item.product.price|prices_filter}}</strike>
          </swiper-slide>
        {% endfor %}
      </swiper-container>
      </div>
    {% endif %}
  </section>

  <section>
      {% if bargainable_products %}
        <div class="swiper-header">
        Bargainable Prices<a class="see-all-link" href="/bargainable-prices">SEE ALL <img src="{% static 'images/icons/right-angle.png' %}" alt="right-angle-icon"> </a>
        </div>
        <div class="swiper-container">
          <swiper-container class="mySwiper" space-between="0"
          slides-per-view="2.5">
          {% for product in bargainable_products %}
            <swiper-slide>
              <div class="swiper-image"><img src="{{product.cover_image.url}}"></div>
              {% if product.discounted_price %}
                <div class="price">Ksh {{product.discounted_price|prices_filter}}</div>
              {% else %}
              <div class="price">Ksh {{product.price|prices_filter}}</div>
              {% endif %}
            </swiper-slide>
          {% endfor %}
        </swiper-container>
        </div>
      {% endif %}
  </section>

  <section>
    {% if reviews %}
      <div class="swiper-header">
      Customers Reviews<a class="see-all-link" href="{% url 'reviews:index' %}">SEE ALL <img src="{% static 'images/icons/right-angle.png' %}" alt="right-angle-icon"> </a>
      </div>
      <div class="swiper-container">
        <swiper-container class="mySwiper" space-between="0"
        slides-per-view="2">
          {% for review in reviews %}
            <swiper-slide class="reviews-container">
              <div class="review-top-section">
                <img class="review-account" src="{% static 'images/icons/user-account.png' %}">
                <div class="user-details">
                  <strong style="height: 30%;">{{review.user}}</strong>
                  <div style="height: 70%;">
                    <img class="review-stars" src="../static/images/ratings/rating-{{review.stars}}.0.png">
                  </div>
                </div>
              </div>
              <p class="review-comment">
                " {{review.comment}}"
              </p>
              <p class="review-date"> <strong>Created on:</strong> {{review.created_at}}</p>
            </swiper-slide>
          {% endfor %}
        </swiper-container>
      </div>
    {% endif %} 
</section>
</main>

{{products|json_script:"products-data"}}

<script src="../static/scripts/cdns/swiper.js"></script>

<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-element-bundle.min.js"></script>

<script type="module" src="{% static 'scripts/search.js' %}"></script>
<script type="module" src="{% static 'scripts/home.js' %}"></script>

{% endblock %}
